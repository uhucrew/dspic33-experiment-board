#include <math.h>
#include <xc.h>

#include "defines.h"
#include "sine.h"
#include "fft.h"
#include "spi_x.h"

__eds__ SINE_TABLE_TYPE sine_table[SINE_POINTS] __attribute__((aligned(SINE_POINTS<<1),space(ymemory),eds,address(YMEM_BASE_SINE)));
/* = {
    0x0000,	0x0064,	0x00C9,	0x012D,
    0x0192,	0x01F6,	0x025B,	0x02BF,
    0x0324,	0x0388,	0x03ED,	0x0451,
    0x04B6,	0x051A,	0x057F,	0x05E3,
    0x0647,	0x06AC,	0x0710,	0x0775,
    0x07D9,	0x083D,	0x08A2,	0x0906,
    0x096A,	0x09CE,	0x0A33,	0x0A97,
    0x0AFB,	0x0B5F,	0x0BC3,	0x0C27,
    0x0C8B,	0x0CEF,	0x0D53,	0x0DB7,
    0x0E1B,	0x0E7F,	0x0EE3,	0x0F47,
    0x0FAB,	0x100E,	0x1072,	0x10D6,
    0x1139,	0x119D,	0x1201,	0x1264,
    0x12C8,	0x132B,	0x138E,	0x13F2,
    0x1455,	0x14B8,	0x151B,	0x157F,
    0x15E2,	0x1645,	0x16A8,	0x170A,
    0x176D,	0x17D0,	0x1833,	0x1896,
    0x18F8,	0x195B,	0x19BD,	0x1A20,
    0x1A82,	0x1AE4,	0x1B47,	0x1BA9,
    0x1C0B,	0x1C6D,	0x1CCF,	0x1D31,
    0x1D93,	0x1DF5,	0x1E56,	0x1EB8,
    0x1F19,	0x1F7B,	0x1FDC,	0x203E,
    0x209F,	0x2100,	0x2161,	0x21C2,
    0x2223,	0x2284,	0x22E5,	0x2345,
    0x23A6,	0x2407,	0x2467,	0x24C7,
    0x2528,	0x2588,	0x25E8,	0x2648,
    0x26A8,	0x2707,	0x2767,	0x27C7,
    0x2826,	0x2886,	0x28E5,	0x2944,
    0x29A3,	0x2A02,	0x2A61,	0x2AC0,
    0x2B1F,	0x2B7D,	0x2BDC,	0x2C3A,
    0x2C98,	0x2CF7,	0x2D55,	0x2DB3,
    0x2E11,	0x2E6E,	0x2ECC,	0x2F29,
    0x2F87,	0x2FE4,	0x3041,	0x309E,
    0x30FB,	0x3158,	0x31B5,	0x3211,
    0x326E,	0x32CA,	0x3326,	0x3382,
    0x33DE,	0x343A,	0x3496,	0x34F2,
    0x354D,	0x35A8,	0x3604,	0x365F,
    0x36BA,	0x3714,	0x376F,	0x37CA,
    0x3824,	0x387E,	0x38D8,	0x3932,
    0x398C,	0x39E6,	0x3A40,	0x3A99,
    0x3AF2,	0x3B4C,	0x3BA5,	0x3BFD,
    0x3C56,	0x3CAF,	0x3D07,	0x3D60,
    0x3DB8,	0x3E10,	0x3E68,	0x3EBF,
    0x3F17,	0x3F6E,	0x3FC5,	0x401D,
    0x4073,	0x40CA,	0x4121,	0x4177,
    0x41CE,	0x4224,	0x427A,	0x42D0,
    0x4325,	0x437B,	0x43D0,	0x4425,
    0x447A,	0x44CF,	0x4524,	0x4578,
    0x45CD,	0x4621,	0x4675,	0x46C9,
    0x471C,	0x4770,	0x47C3,	0x4816,
    0x4869,	0x48BC,	0x490F,	0x4961,
    0x49B4,	0x4A06,	0x4A58,	0x4AA9,
    0x4AFB,	0x4B4C,	0x4B9E,	0x4BEF,
    0x4C3F,	0x4C90,	0x4CE1,	0x4D31,
    0x4D81,	0x4DD1,	0x4E21,	0x4E70,
    0x4EBF,	0x4F0F,	0x4F5E,	0x4FAC,
    0x4FFB,	0x5049,	0x5097,	0x50E5,
    0x5133,	0x5181,	0x51CE,	0x521C,
    0x5269,	0x52B5,	0x5302,	0x534E,
    0x539B,	0x53E7,	0x5433,	0x547E,
    0x54CA,	0x5515,	0x5560,	0x55AB,
    0x55F5,	0x5640,	0x568A,	0x56D4,
    0x571D,	0x5767,	0x57B0,	0x57F9,
    0x5842,	0x588B,	0x58D4,	0x591C,
    0x5964,	0x59AC,	0x59F3,	0x5A3B,
    0x5A82,	0x5AC9,	0x5B10,	0x5B56,
    0x5B9D,	0x5BE3,	0x5C29,	0x5C6E,
    0x5CB4,	0x5CF9,	0x5D3E,	0x5D83,
    0x5DC7,	0x5E0B,	0x5E50,	0x5E93,
    0x5ED7,	0x5F1A,	0x5F5E,	0x5FA0,
    0x5FE3,	0x6026,	0x6068,	0x60AA,
    0x60EC,	0x612D,	0x616F,	0x61B0,
    0x61F1,	0x6231,	0x6271,	0x62B2,
    0x62F2,	0x6331,	0x6371,	0x63B0,
    0x63EF,	0x642D,	0x646C,	0x64AA,
    0x64E8,	0x6526,	0x6563,	0x65A0,
    0x65DD,	0x661A,	0x6657,	0x6693,
    0x66CF,	0x670B,	0x6746,	0x6782,
    0x67BD,	0x67F7,	0x6832,	0x686C,
    0x68A6,	0x68E0,	0x6919,	0x6953,
    0x698C,	0x69C4,	0x69FD,	0x6A35,
    0x6A6D,	0x6AA5,	0x6ADC,	0x6B13,
    0x6B4A,	0x6B81,	0x6BB8,	0x6BEE,
    0x6C24,	0x6C59,	0x6C8F,	0x6CC4,
    0x6CF9,	0x6D2D,	0x6D62,	0x6D96,
    0x6DCA,	0x6DFD,	0x6E30,	0x6E63,
    0x6E96,	0x6EC9,	0x6EFB,	0x6F2D,
    0x6F5F,	0x6F90,	0x6FC1,	0x6FF2,
    0x7023,	0x7053,	0x7083,	0x70B3,
    0x70E2,	0x7112,	0x7141,	0x716F,
    0x719E,	0x71CC,	0x71FA,	0x7227,
    0x7255,	0x7282,	0x72AF,	0x72DB,
    0x7307,	0x7333,	0x735F,	0x738A,
    0x73B5,	0x73E0,	0x740B,	0x7435,
    0x745F,	0x7489,	0x74B2,	0x74DB,
    0x7504,	0x752D,	0x7555,	0x757D,
    0x75A5,	0x75CC,	0x75F4,	0x761B,
    0x7641,	0x7668,	0x768E,	0x76B3,
    0x76D9,	0x76FE,	0x7723,	0x7747,
    0x776C,	0x7790,	0x77B4,	0x77D7,
    0x77FA,	0x781D,	0x7840,	0x7862,
    0x7884,	0x78A6,	0x78C7,	0x78E8,
    0x7909,	0x792A,	0x794A,	0x796A,
    0x798A,	0x79A9,	0x79C8,	0x79E7,
    0x7A05,	0x7A24,	0x7A42,	0x7A5F,
    0x7A7D,	0x7A9A,	0x7AB6,	0x7AD3,
    0x7AEF,	0x7B0B,	0x7B26,	0x7B42,
    0x7B5D,	0x7B77,	0x7B92,	0x7BAC,
    0x7BC5,	0x7BDF,	0x7BF8,	0x7C11,
    0x7C29,	0x7C42,	0x7C5A,	0x7C71,
    0x7C89,	0x7CA0,	0x7CB7,	0x7CCD,
    0x7CE3,	0x7CF9,	0x7D0F,	0x7D24,
    0x7D39,	0x7D4E,	0x7D62,	0x7D76,
    0x7D8A,	0x7D9D,	0x7DB0,	0x7DC3,
    0x7DD6,	0x7DE8,	0x7DFA,	0x7E0C,
    0x7E1D,	0x7E2E,	0x7E3F,	0x7E4F,
    0x7E5F,	0x7E6F,	0x7E7F,	0x7E8E,
    0x7E9D,	0x7EAB,	0x7EBA,	0x7EC8,
    0x7ED5,	0x7EE3,	0x7EF0,	0x7EFD,
    0x7F09,	0x7F15,	0x7F21,	0x7F2D,
    0x7F38,	0x7F43,	0x7F4D,	0x7F58,
    0x7F62,	0x7F6B,	0x7F75,	0x7F7E,
    0x7F87,	0x7F8F,	0x7F97,	0x7F9F,
    0x7FA7,	0x7FAE,	0x7FB5,	0x7FBC,
    0x7FC2,	0x7FC8,	0x7FCE,	0x7FD3,
    0x7FD8,	0x7FDD,	0x7FE1,	0x7FE5,
    0x7FE9,	0x7FED,	0x7FF0,	0x7FF3,
    0x7FF6,	0x7FF8,	0x7FFA,	0x7FFC,
    0x7FFD,	0x7FFE,	0x7FFF,	0x7FFF,
    0x7FFF,	0x7FFF,	0x7FFF,	0x7FFE,
    0x7FFD,	0x7FFC,	0x7FFA,	0x7FF8,
    0x7FF6,	0x7FF3,	0x7FF0,	0x7FED,
    0x7FE9,	0x7FE5,	0x7FE1,	0x7FDD,
    0x7FD8,	0x7FD3,	0x7FCE,	0x7FC8,
    0x7FC2,	0x7FBC,	0x7FB5,	0x7FAE,
    0x7FA7,	0x7F9F,	0x7F97,	0x7F8F,
    0x7F87,	0x7F7E,	0x7F75,	0x7F6B,
    0x7F62,	0x7F58,	0x7F4D,	0x7F43,
    0x7F38,	0x7F2D,	0x7F21,	0x7F15,
    0x7F09,	0x7EFD,	0x7EF0,	0x7EE3,
    0x7ED5,	0x7EC8,	0x7EBA,	0x7EAB,
    0x7E9D,	0x7E8E,	0x7E7F,	0x7E6F,
    0x7E5F,	0x7E4F,	0x7E3F,	0x7E2E,
    0x7E1D,	0x7E0C,	0x7DFA,	0x7DE8,
    0x7DD6,	0x7DC3,	0x7DB0,	0x7D9D,
    0x7D8A,	0x7D76,	0x7D62,	0x7D4E,
    0x7D39,	0x7D24,	0x7D0F,	0x7CF9,
    0x7CE3,	0x7CCD,	0x7CB7,	0x7CA0,
    0x7C89,	0x7C71,	0x7C5A,	0x7C42,
    0x7C29,	0x7C11,	0x7BF8,	0x7BDF,
    0x7BC5,	0x7BAC,	0x7B92,	0x7B77,
    0x7B5D,	0x7B42,	0x7B26,	0x7B0B,
    0x7AEF,	0x7AD3,	0x7AB6,	0x7A9A,
    0x7A7D,	0x7A5F,	0x7A42,	0x7A24,
    0x7A05,	0x79E7,	0x79C8,	0x79A9,
    0x798A,	0x796A,	0x794A,	0x792A,
    0x7909,	0x78E8,	0x78C7,	0x78A6,
    0x7884,	0x7862,	0x7840,	0x781D,
    0x77FA,	0x77D7,	0x77B4,	0x7790,
    0x776C,	0x7747,	0x7723,	0x76FE,
    0x76D9,	0x76B3,	0x768E,	0x7668,
    0x7641,	0x761B,	0x75F4,	0x75CC,
    0x75A5,	0x757D,	0x7555,	0x752D,
    0x7504,	0x74DB,	0x74B2,	0x7489,
    0x745F,	0x7435,	0x740B,	0x73E0,
    0x73B5,	0x738A,	0x735F,	0x7333,
    0x7307,	0x72DB,	0x72AF,	0x7282,
    0x7255,	0x7227,	0x71FA,	0x71CC,
    0x719E,	0x716F,	0x7141,	0x7112,
    0x70E2,	0x70B3,	0x7083,	0x7053,
    0x7023,	0x6FF2,	0x6FC1,	0x6F90,
    0x6F5F,	0x6F2D,	0x6EFB,	0x6EC9,
    0x6E96,	0x6E63,	0x6E30,	0x6DFD,
    0x6DCA,	0x6D96,	0x6D62,	0x6D2D,
    0x6CF9,	0x6CC4,	0x6C8F,	0x6C59,
    0x6C24,	0x6BEE,	0x6BB8,	0x6B81,
    0x6B4A,	0x6B13,	0x6ADC,	0x6AA5,
    0x6A6D,	0x6A35,	0x69FD,	0x69C4,
    0x698C,	0x6953,	0x6919,	0x68E0,
    0x68A6,	0x686C,	0x6832,	0x67F7,
    0x67BD,	0x6782,	0x6746,	0x670B,
    0x66CF,	0x6693,	0x6657,	0x661A,
    0x65DD,	0x65A0,	0x6563,	0x6526,
    0x64E8,	0x64AA,	0x646C,	0x642D,
    0x63EF,	0x63B0,	0x6371,	0x6331,
    0x62F2,	0x62B2,	0x6271,	0x6231,
    0x61F1,	0x61B0,	0x616F,	0x612D,
    0x60EC,	0x60AA,	0x6068,	0x6026,
    0x5FE3,	0x5FA0,	0x5F5E,	0x5F1A,
    0x5ED7,	0x5E93,	0x5E50,	0x5E0B,
    0x5DC7,	0x5D83,	0x5D3E,	0x5CF9,
    0x5CB4,	0x5C6E,	0x5C29,	0x5BE3,
    0x5B9D,	0x5B56,	0x5B10,	0x5AC9,
    0x5A82,	0x5A3B,	0x59F3,	0x59AC,
    0x5964,	0x591C,	0x58D4,	0x588B,
    0x5842,	0x57F9,	0x57B0,	0x5767,
    0x571D,	0x56D4,	0x568A,	0x5640,
    0x55F5,	0x55AB,	0x5560,	0x5515,
    0x54CA,	0x547E,	0x5433,	0x53E7,
    0x539B,	0x534E,	0x5302,	0x52B5,
    0x5269,	0x521C,	0x51CE,	0x5181,
    0x5133,	0x50E5,	0x5097,	0x5049,
    0x4FFB,	0x4FAC,	0x4F5E,	0x4F0F,
    0x4EBF,	0x4E70,	0x4E21,	0x4DD1,
    0x4D81,	0x4D31,	0x4CE1,	0x4C90,
    0x4C3F,	0x4BEF,	0x4B9E,	0x4B4C,
    0x4AFB,	0x4AA9,	0x4A58,	0x4A06,
    0x49B4,	0x4961,	0x490F,	0x48BC,
    0x4869,	0x4816,	0x47C3,	0x4770,
    0x471C,	0x46C9,	0x4675,	0x4621,
    0x45CD,	0x4578,	0x4524,	0x44CF,
    0x447A,	0x4425,	0x43D0,	0x437B,
    0x4325,	0x42D0,	0x427A,	0x4224,
    0x41CE,	0x4177,	0x4121,	0x40CA,
    0x4073,	0x401D,	0x3FC5,	0x3F6E,
    0x3F17,	0x3EBF,	0x3E68,	0x3E10,
    0x3DB8,	0x3D60,	0x3D07,	0x3CAF,
    0x3C56,	0x3BFD,	0x3BA5,	0x3B4C,
    0x3AF2,	0x3A99,	0x3A40,	0x39E6,
    0x398C,	0x3932,	0x38D8,	0x387E,
    0x3824,	0x37CA,	0x376F,	0x3714,
    0x36BA,	0x365F,	0x3604,	0x35A8,
    0x354D,	0x34F2,	0x3496,	0x343A,
    0x33DE,	0x3382,	0x3326,	0x32CA,
    0x326E,	0x3211,	0x31B5,	0x3158,
    0x30FB,	0x309E,	0x3041,	0x2FE4,
    0x2F87,	0x2F29,	0x2ECC,	0x2E6E,
    0x2E11,	0x2DB3,	0x2D55,	0x2CF7,
    0x2C98,	0x2C3A,	0x2BDC,	0x2B7D,
    0x2B1F,	0x2AC0,	0x2A61,	0x2A02,
    0x29A3,	0x2944,	0x28E5,	0x2886,
    0x2826,	0x27C7,	0x2767,	0x2707,
    0x26A8,	0x2648,	0x25E8,	0x2588,
    0x2528,	0x24C7,	0x2467,	0x2407,
    0x23A6,	0x2345,	0x22E5,	0x2284,
    0x2223,	0x21C2,	0x2161,	0x2100,
    0x209F,	0x203E,	0x1FDC,	0x1F7B,
    0x1F19,	0x1EB8,	0x1E56,	0x1DF5,
    0x1D93,	0x1D31,	0x1CCF,	0x1C6D,
    0x1C0B,	0x1BA9,	0x1B47,	0x1AE4,
    0x1A82,	0x1A20,	0x19BD,	0x195B,
    0x18F8,	0x1896,	0x1833,	0x17D0,
    0x176D,	0x170A,	0x16A8,	0x1645,
    0x15E2,	0x157F,	0x151B,	0x14B8,
    0x1455,	0x13F2,	0x138E,	0x132B,
    0x12C8,	0x1264,	0x1201,	0x119D,
    0x1139,	0x10D6,	0x1072,	0x100E,
    0x0FAB,	0x0F47,	0x0EE3,	0x0E7F,
    0x0E1B,	0x0DB7,	0x0D53,	0x0CEF,
    0x0C8B,	0x0C27,	0x0BC3,	0x0B5F,
    0x0AFB,	0x0A97,	0x0A33,	0x09CE,
    0x096A,	0x0906,	0x08A2,	0x083D,
    0x07D9,	0x0775,	0x0710,	0x06AC,
    0x0647,	0x05E3,	0x057F,	0x051A,
    0x04B6,	0x0451,	0x03ED,	0x0388,
    0x0324,	0x02BF,	0x025B,	0x01F6,
    0x0192,	0x012D,	0x00C9,	0x0064,
    0x0000,	0xFF9B,	0xFF36,	0xFED2,
    0xFE6D,	0xFE09,	0xFDA4,	0xFD40,
    0xFCDB,	0xFC77,	0xFC12,	0xFBAE,
    0xFB49,	0xFAE5,	0xFA80,	0xFA1C,
    0xF9B8,	0xF953,	0xF8EF,	0xF88A,
    0xF826,	0xF7C2,	0xF75D,	0xF6F9,
    0xF695,	0xF631,	0xF5CC,	0xF568,
    0xF504,	0xF4A0,	0xF43C,	0xF3D8,
    0xF374,	0xF310,	0xF2AC,	0xF248,
    0xF1E4,	0xF180,	0xF11C,	0xF0B8,
    0xF054,	0xEFF1,	0xEF8D,	0xEF29,
    0xEEC6,	0xEE62,	0xEDFE,	0xED9B,
    0xED37,	0xECD4,	0xEC71,	0xEC0D,
    0xEBAA,	0xEB47,	0xEAE4,	0xEA80,
    0xEA1D,	0xE9BA,	0xE957,	0xE8F5,
    0xE892,	0xE82F,	0xE7CC,	0xE769,
    0xE707,	0xE6A4,	0xE642,	0xE5DF,
    0xE57D,	0xE51B,	0xE4B8,	0xE456,
    0xE3F4,	0xE392,	0xE330,	0xE2CE,
    0xE26C,	0xE20A,	0xE1A9,	0xE147,
    0xE0E6,	0xE084,	0xE023,	0xDFC1,
    0xDF60,	0xDEFF,	0xDE9E,	0xDE3D,
    0xDDDC,	0xDD7B,	0xDD1A,	0xDCBA,
    0xDC59,	0xDBF8,	0xDB98,	0xDB38,
    0xDAD7,	0xDA77,	0xDA17,	0xD9B7,
    0xD957,	0xD8F8,	0xD898,	0xD838,
    0xD7D9,	0xD779,	0xD71A,	0xD6BB,
    0xD65C,	0xD5FD,	0xD59E,	0xD53F,
    0xD4E0,	0xD482,	0xD423,	0xD3C5,
    0xD367,	0xD308,	0xD2AA,	0xD24C,
    0xD1EE,	0xD191,	0xD133,	0xD0D6,
    0xD078,	0xD01B,	0xCFBE,	0xCF61,
    0xCF04,	0xCEA7,	0xCE4A,	0xCDEE,
    0xCD91,	0xCD35,	0xCCD9,	0xCC7D,
    0xCC21,	0xCBC5,	0xCB69,	0xCB0D,
    0xCAB2,	0xCA57,	0xC9FB,	0xC9A0,
    0xC945,	0xC8EB,	0xC890,	0xC835,
    0xC7DB,	0xC781,	0xC727,	0xC6CD,
    0xC673,	0xC619,	0xC5BF,	0xC566,
    0xC50D,	0xC4B3,	0xC45A,	0xC402,
    0xC3A9,	0xC350,	0xC2F8,	0xC29F,
    0xC247,	0xC1EF,	0xC197,	0xC140,
    0xC0E8,	0xC091,	0xC03A,	0xBFE2,
    0xBF8C,	0xBF35,	0xBEDE,	0xBE88,
    0xBE31,	0xBDDB,	0xBD85,	0xBD2F,
    0xBCDA,	0xBC84,	0xBC2F,	0xBBDA,
    0xBB85,	0xBB30,	0xBADB,	0xBA87,
    0xBA32,	0xB9DE,	0xB98A,	0xB936,
    0xB8E3,	0xB88F,	0xB83C,	0xB7E9,
    0xB796,	0xB743,	0xB6F0,	0xB69E,
    0xB64B,	0xB5F9,	0xB5A7,	0xB556,
    0xB504,	0xB4B3,	0xB461,	0xB410,
    0xB3C0,	0xB36F,	0xB31E,	0xB2CE,
    0xB27E,	0xB22E,	0xB1DE,	0xB18F,
    0xB140,	0xB0F0,	0xB0A1,	0xB053,
    0xB004,	0xAFB6,	0xAF68,	0xAF1A,
    0xAECC,	0xAE7E,	0xAE31,	0xADE3,
    0xAD96,	0xAD4A,	0xACFD,	0xACB1,
    0xAC64,	0xAC18,	0xABCC,	0xAB81,
    0xAB35,	0xAAEA,	0xAA9F,	0xAA54,
    0xAA0A,	0xA9BF,	0xA975,	0xA92B,
    0xA8E2,	0xA898,	0xA84F,	0xA806,
    0xA7BD,	0xA774,	0xA72B,	0xA6E3,
    0xA69B,	0xA653,	0xA60C,	0xA5C4,
    0xA57D,	0xA536,	0xA4EF,	0xA4A9,
    0xA462,	0xA41C,	0xA3D6,	0xA391,
    0xA34B,	0xA306,	0xA2C1,	0xA27C,
    0xA238,	0xA1F4,	0xA1AF,	0xA16C,
    0xA128,	0xA0E5,	0xA0A1,	0xA05F,
    0xA01C,	0x9FD9,	0x9F97,	0x9F55,
    0x9F13,	0x9ED2,	0x9E90,	0x9E4F,
    0x9E0E,	0x9DCE,	0x9D8E,	0x9D4D,
    0x9D0D,	0x9CCE,	0x9C8E,	0x9C4F,
    0x9C10,	0x9BD2,	0x9B93,	0x9B55,
    0x9B17,	0x9AD9,	0x9A9C,	0x9A5F,
    0x9A22,	0x99E5,	0x99A8,	0x996C,
    0x9930,	0x98F4,	0x98B9,	0x987D,
    0x9842,	0x9808,	0x97CD,	0x9793,
    0x9759,	0x971F,	0x96E6,	0x96AC,
    0x9673,	0x963B,	0x9602,	0x95CA,
    0x9592,	0x955A,	0x9523,	0x94EC,
    0x94B5,	0x947E,	0x9447,	0x9411,
    0x93DB,	0x93A6,	0x9370,	0x933B,
    0x9306,	0x92D2,	0x929D,	0x9269,
    0x9235,	0x9202,	0x91CF,	0x919C,
    0x9169,	0x9136,	0x9104,	0x90D2,
    0x90A0,	0x906F,	0x903E,	0x900D,
    0x8FDC,	0x8FAC,	0x8F7C,	0x8F4C,
    0x8F1D,	0x8EED,	0x8EBE,	0x8E90,
    0x8E61,	0x8E33,	0x8E05,	0x8DD8,
    0x8DAA,	0x8D7D,	0x8D50,	0x8D24,
    0x8CF8,	0x8CCC,	0x8CA0,	0x8C75,
    0x8C4A,	0x8C1F,	0x8BF4,	0x8BCA,
    0x8BA0,	0x8B76,	0x8B4D,	0x8B24,
    0x8AFB,	0x8AD2,	0x8AAA,	0x8A82,
    0x8A5A,	0x8A33,	0x8A0B,	0x89E4,
    0x89BE,	0x8997,	0x8971,	0x894C,
    0x8926,	0x8901,	0x88DC,	0x88B8,
    0x8893,	0x886F,	0x884B,	0x8828,
    0x8805,	0x87E2,	0x87BF,	0x879D,
    0x877B,	0x8759,	0x8738,	0x8717,
    0x86F6,	0x86D5,	0x86B5,	0x8695,
    0x8675,	0x8656,	0x8637,	0x8618,
    0x85FA,	0x85DB,	0x85BD,	0x85A0,
    0x8582,	0x8565,	0x8549,	0x852C,
    0x8510,	0x84F4,	0x84D9,	0x84BD,
    0x84A2,	0x8488,	0x846D,	0x8453,
    0x843A,	0x8420,	0x8407,	0x83EE,
    0x83D6,	0x83BD,	0x83A5,	0x838E,
    0x8376,	0x835F,	0x8348,	0x8332,
    0x831C,	0x8306,	0x82F0,	0x82DB,
    0x82C6,	0x82B1,	0x829D,	0x8289,
    0x8275,	0x8262,	0x824F,	0x823C,
    0x8229,	0x8217,	0x8205,	0x81F3,
    0x81E2,	0x81D1,	0x81C0,	0x81B0,
    0x81A0,	0x8190,	0x8180,	0x8171,
    0x8162,	0x8154,	0x8145,	0x8137,
    0x812A,	0x811C,	0x810F,	0x8102,
    0x80F6,	0x80EA,	0x80DE,	0x80D2,
    0x80C7,	0x80BC,	0x80B2,	0x80A7,
    0x809D,	0x8094,	0x808A,	0x8081,
    0x8078,	0x8070,	0x8068,	0x8060,
    0x8058,	0x8051,	0x804A,	0x8043,
    0x803D,	0x8037,	0x8031,	0x802C,
    0x8027,	0x8022,	0x801E,	0x801A,
    0x8016,	0x8012,	0x800F,	0x800C,
    0x8009,	0x8007,	0x8005,	0x8003,
    0x8002,	0x8001,	0x8000,	0x8000,
    0x8000,	0x8000,	0x8000,	0x8001,
    0x8002,	0x8003,	0x8005,	0x8007,
    0x8009,	0x800C,	0x800F,	0x8012,
    0x8016,	0x801A,	0x801E,	0x8022,
    0x8027,	0x802C,	0x8031,	0x8037,
    0x803D,	0x8043,	0x804A,	0x8051,
    0x8058,	0x8060,	0x8068,	0x8070,
    0x8078,	0x8081,	0x808A,	0x8094,
    0x809D,	0x80A7,	0x80B2,	0x80BC,
    0x80C7,	0x80D2,	0x80DE,	0x80EA,
    0x80F6,	0x8102,	0x810F,	0x811C,
    0x812A,	0x8137,	0x8145,	0x8154,
    0x8162,	0x8171,	0x8180,	0x8190,
    0x81A0,	0x81B0,	0x81C0,	0x81D1,
    0x81E2,	0x81F3,	0x8205,	0x8217,
    0x8229,	0x823C,	0x824F,	0x8262,
    0x8275,	0x8289,	0x829D,	0x82B1,
    0x82C6,	0x82DB,	0x82F0,	0x8306,
    0x831C,	0x8332,	0x8348,	0x835F,
    0x8376,	0x838E,	0x83A5,	0x83BD,
    0x83D6,	0x83EE,	0x8407,	0x8420,
    0x843A,	0x8453,	0x846D,	0x8488,
    0x84A2,	0x84BD,	0x84D9,	0x84F4,
    0x8510,	0x852C,	0x8549,	0x8565,
    0x8582,	0x85A0,	0x85BD,	0x85DB,
    0x85FA,	0x8618,	0x8637,	0x8656,
    0x8675,	0x8695,	0x86B5,	0x86D5,
    0x86F6,	0x8717,	0x8738,	0x8759,
    0x877B,	0x879D,	0x87BF,	0x87E2,
    0x8805,	0x8828,	0x884B,	0x886F,
    0x8893,	0x88B8,	0x88DC,	0x8901,
    0x8926,	0x894C,	0x8971,	0x8997,
    0x89BE,	0x89E4,	0x8A0B,	0x8A33,
    0x8A5A,	0x8A82,	0x8AAA,	0x8AD2,
    0x8AFB,	0x8B24,	0x8B4D,	0x8B76,
    0x8BA0,	0x8BCA,	0x8BF4,	0x8C1F,
    0x8C4A,	0x8C75,	0x8CA0,	0x8CCC,
    0x8CF8,	0x8D24,	0x8D50,	0x8D7D,
    0x8DAA,	0x8DD8,	0x8E05,	0x8E33,
    0x8E61,	0x8E90,	0x8EBE,	0x8EED,
    0x8F1D,	0x8F4C,	0x8F7C,	0x8FAC,
    0x8FDC,	0x900D,	0x903E,	0x906F,
    0x90A0,	0x90D2,	0x9104,	0x9136,
    0x9169,	0x919C,	0x91CF,	0x9202,
    0x9235,	0x9269,	0x929D,	0x92D2,
    0x9306,	0x933B,	0x9370,	0x93A6,
    0x93DB,	0x9411,	0x9447,	0x947E,
    0x94B5,	0x94EC,	0x9523,	0x955A,
    0x9592,	0x95CA,	0x9602,	0x963B,
    0x9673,	0x96AC,	0x96E6,	0x971F,
    0x9759,	0x9793,	0x97CD,	0x9808,
    0x9842,	0x987D,	0x98B9,	0x98F4,
    0x9930,	0x996C,	0x99A8,	0x99E5,
    0x9A22,	0x9A5F,	0x9A9C,	0x9AD9,
    0x9B17,	0x9B55,	0x9B93,	0x9BD2,
    0x9C10,	0x9C4F,	0x9C8E,	0x9CCE,
    0x9D0D,	0x9D4D,	0x9D8E,	0x9DCE,
    0x9E0E,	0x9E4F,	0x9E90,	0x9ED2,
    0x9F13,	0x9F55,	0x9F97,	0x9FD9,
    0xA01C,	0xA05F,	0xA0A1,	0xA0E5,
    0xA128,	0xA16C,	0xA1AF,	0xA1F4,
    0xA238,	0xA27C,	0xA2C1,	0xA306,
    0xA34B,	0xA391,	0xA3D6,	0xA41C,
    0xA462,	0xA4A9,	0xA4EF,	0xA536,
    0xA57D,	0xA5C4,	0xA60C,	0xA653,
    0xA69B,	0xA6E3,	0xA72B,	0xA774,
    0xA7BD,	0xA806,	0xA84F,	0xA898,
    0xA8E2,	0xA92B,	0xA975,	0xA9BF,
    0xAA0A,	0xAA54,	0xAA9F,	0xAAEA,
    0xAB35,	0xAB81,	0xABCC,	0xAC18,
    0xAC64,	0xACB1,	0xACFD,	0xAD4A,
    0xAD96,	0xADE3,	0xAE31,	0xAE7E,
    0xAECC,	0xAF1A,	0xAF68,	0xAFB6,
    0xB004,	0xB053,	0xB0A1,	0xB0F0,
    0xB140,	0xB18F,	0xB1DE,	0xB22E,
    0xB27E,	0xB2CE,	0xB31E,	0xB36F,
    0xB3C0,	0xB410,	0xB461,	0xB4B3,
    0xB504,	0xB556,	0xB5A7,	0xB5F9,
    0xB64B,	0xB69E,	0xB6F0,	0xB743,
    0xB796,	0xB7E9,	0xB83C,	0xB88F,
    0xB8E3,	0xB936,	0xB98A,	0xB9DE,
    0xBA32,	0xBA87,	0xBADB,	0xBB30,
    0xBB85,	0xBBDA,	0xBC2F,	0xBC84,
    0xBCDA,	0xBD2F,	0xBD85,	0xBDDB,
    0xBE31,	0xBE88,	0xBEDE,	0xBF35,
    0xBF8C,	0xBFE2,	0xC03A,	0xC091,
    0xC0E8,	0xC140,	0xC197,	0xC1EF,
    0xC247,	0xC29F,	0xC2F8,	0xC350,
    0xC3A9,	0xC402,	0xC45A,	0xC4B3,
    0xC50D,	0xC566,	0xC5BF,	0xC619,
    0xC673,	0xC6CD,	0xC727,	0xC781,
    0xC7DB,	0xC835,	0xC890,	0xC8EB,
    0xC945,	0xC9A0,	0xC9FB,	0xCA57,
    0xCAB2,	0xCB0D,	0xCB69,	0xCBC5,
    0xCC21,	0xCC7D,	0xCCD9,	0xCD35,
    0xCD91,	0xCDEE,	0xCE4A,	0xCEA7,
    0xCF04,	0xCF61,	0xCFBE,	0xD01B,
    0xD078,	0xD0D6,	0xD133,	0xD191,
    0xD1EE,	0xD24C,	0xD2AA,	0xD308,
    0xD367,	0xD3C5,	0xD423,	0xD482,
    0xD4E0,	0xD53F,	0xD59E,	0xD5FD,
    0xD65C,	0xD6BB,	0xD71A,	0xD779,
    0xD7D9,	0xD838,	0xD898,	0xD8F8,
    0xD957,	0xD9B7,	0xDA17,	0xDA77,
    0xDAD7,	0xDB38,	0xDB98,	0xDBF8,
    0xDC59,	0xDCBA,	0xDD1A,	0xDD7B,
    0xDDDC,	0xDE3D,	0xDE9E,	0xDEFF,
    0xDF60,	0xDFC1,	0xE023,	0xE084,
    0xE0E6,	0xE147,	0xE1A9,	0xE20A,
    0xE26C,	0xE2CE,	0xE330,	0xE392,
    0xE3F4,	0xE456,	0xE4B8,	0xE51B,
    0xE57D,	0xE5DF,	0xE642,	0xE6A4,
    0xE707,	0xE769,	0xE7CC,	0xE82F,
    0xE892,	0xE8F5,	0xE957,	0xE9BA,
    0xEA1D,	0xEA80,	0xEAE4,	0xEB47,
    0xEBAA,	0xEC0D,	0xEC71,	0xECD4,
    0xED37,	0xED9B,	0xEDFE,	0xEE62,
    0xEEC6,	0xEF29,	0xEF8D,	0xEFF1,
    0xF054,	0xF0B8,	0xF11C,	0xF180,
    0xF1E4,	0xF248,	0xF2AC,	0xF310,
    0xF374,	0xF3D8,	0xF43C,	0xF4A0,
    0xF504,	0xF568,	0xF5CC,	0xF631,
    0xF695,	0xF6F9,	0xF75D,	0xF7C2,
    0xF826,	0xF88A,	0xF8EF,	0xF953,
    0xF9B8,	0xFA1C,	0xFA80,	0xFAE5,
    0xFB49,	0xFBAE,	0xFC12,	0xFC77,
    0xFCDB,	0xFD40,	0xFDA4,	0xFE09
};*/


//calculate sine table during runtime, uses a lot of ram
void sine_lookup_table_init() {
    uint16_t i;

    double sine_step = 2.0 * PI / (double)SINE_POINTS;
    for (i = 0; i < SINE_POINTS; i++) {
        double value = sine_step * (double)i;
        double sine_value = sin(value);
        sine_table[i] = Float2Fract(sine_value);
    }
}


uint32_t calculate_phase_jump(uint32_t frequency, bool mono) {
    if (mono) {
        return 4294967296ULL * frequency / INPUT_SAMPLERATE_MONO;
    }
    return 4294967296ULL * frequency / INPUT_SAMPLERATE;
}



void buffer_add_sine(uint16_t len, fractional *buffer, bool mono, uint32_t *phase_jump, fractional scale, uint32_t *phase_accu) {
    uint16_t i;
    fractional result;
    uint32_t l_phase_accu = *phase_accu;
    uint32_t l_phase_jump = *phase_jump;

    i = 0;
    do {
        fractional sine_table_value = sine_table[(uint16_t)(l_phase_accu>>PHASE_ACCU_SHIFT)];
        dsp_accA = __builtin_mpy(scale, sine_table_value, NULL, NULL, 0, NULL, NULL, 0); 
        result = __builtin_sac(dsp_accA, 0);
        l_phase_accu += l_phase_jump;
        buffer[i++] = result;
        if (mono) continue;
        buffer[i++] = result;
    } while (i < len);

    *phase_accu = l_phase_accu;
}

void buffer_put_sine(uint16_t len, fractional *buffer, bool mono, uint32_t *phase_jump, fractional scale, uint32_t *phase_accu) {
    uint16_t i;
    fractional result;
    uint32_t l_phase_accu = *phase_accu;
    uint32_t l_phase_jump = *phase_jump;

    i = 0;
    do {
        fractional sine_table_value = sine_table[l_phase_accu>>PHASE_ACCU_SHIFT];
        dsp_accA = __builtin_mpy(scale, sine_table_value, NULL, NULL, 0, NULL, NULL, 0); 
        result = __builtin_sac(dsp_accA, 0);
        l_phase_accu += l_phase_jump;
        buffer[i++] = result;
        if (mono) continue;
        buffer[i++] = result;
    } while (i < len);

    *phase_accu = l_phase_accu;
}

void buffer_multiply_sine(uint16_t len, fractional *buffer, bool mono, uint32_t *phase_jump, fractional scale, uint32_t *phase_accu) {
    uint16_t i;
    uint32_t l_phase_accu = *phase_accu;
    uint32_t l_phase_jump = *phase_jump;

    i = 0;
    if (scale == 0) {
        do {
            fractional sine_table_value = sine_table[(uint16_t)(l_phase_accu>>PHASE_ACCU_SHIFT)];
            dsp_accA = __builtin_mpy(buffer[i], sine_table_value, NULL, NULL, 0, NULL, NULL, 0); 
            buffer[i++] = __builtin_sac(dsp_accA, 0);
            l_phase_accu += l_phase_jump;
            if (mono) continue;
            dsp_accA = __builtin_mpy(buffer[i], sine_table_value, NULL, NULL, 0, NULL, NULL, 0); 
            buffer[i++] = __builtin_sac(dsp_accA, 0);
        } while (i < len);
    }
    else {
        do {
            fractional sine_table_value = sine_table[(uint16_t)(l_phase_accu>>PHASE_ACCU_SHIFT)];
            dsp_accA = __builtin_mpy(scale, sine_table_value, NULL, NULL, 0, NULL, NULL, 0); 
            fractional sine_table_value_scaled = __builtin_sac(dsp_accA, 0);
            dsp_accA = __builtin_mpy(buffer[i], sine_table_value_scaled, NULL, NULL, 0, NULL, NULL, 0); 
            buffer[i++] = __builtin_sac(dsp_accA, 0);
            l_phase_accu += l_phase_jump;
            if (mono) continue;
            dsp_accA = __builtin_mpy(buffer[i], sine_table_value_scaled, NULL, NULL, 0, NULL, NULL, 0); 
            buffer[i++] = __builtin_sac(dsp_accA, 0);
        } while (i < len);
    }

    *phase_accu = l_phase_accu;
}
